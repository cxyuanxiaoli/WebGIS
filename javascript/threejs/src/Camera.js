import { initScene } from "./common";
import * as THREE from "three";
import { GUI } from "dat.gui";

// const { scene, camera, renderer, updateOrbitControl, orbitControl } =
//   initScene("orthographic");
const { scene, camera, renderer, updateOrbitControl, orbitControl } =
  initScene();
document.body.appendChild(renderer.domElement);

//#region 调试
const gui = new GUI();
const cameraFolder = gui.addFolder("Camera");
cameraFolder.add(camera.position, "x").min(-100).max(100).step(2);
cameraFolder.add(camera.position, "y").min(-100).max(100).step(2);
cameraFolder.add(camera.position, "z").min(-100).max(100).step(2);
//#endregion

//#region 光源
const pointLight = new THREE.PointLight(0xffffff, 1, 1000, 0);
pointLight.position.set(0, 80, 100);
scene.add(pointLight);
const ambientLight = new THREE.AmbientLight(0xffffff, 0.2);
scene.add(ambientLight);
//#endregion

//#region 正投影相机
// 正投影相机OrthographicCamera和透视投影相机PerspectiveCamera的区别
// 透视投影可以模拟人眼观察世界的视觉效果，正投影相机不会
const box = new THREE.Mesh(
  new THREE.BoxGeometry(10, 10, 10),
  new THREE.MeshBasicMaterial({ color: 0xff0000 })
);
box.position.set(0, 0, 180);
scene.add(box);
scene.add(box.clone().translateZ(200));
//#endregion

//#region 包装盒Box3
// 包围盒Box3，就是一个长方体空间，把模型的所有顶点数据包围在一个最小的长方体空间中
const box3 = new THREE.Box3();
console.log("init", box3.min, box3.max);

box3.min = new THREE.Vector3(-1, -1, 0);
box3.max = new THREE.Vector3(1, 2, 5);
console.log("box3", box3.min, box3.max);

// 计算物体的包装盒
const sphere = new THREE.Mesh(
  new THREE.SphereGeometry(10),
  new THREE.MeshLambertMaterial({ color: 0x00ff00 })
);
scene.add(sphere);

// 扩展此包围盒的边界，使得对象及其子对象在包围盒内，包括对象和子对象的世界坐标的变换
// 该方法可能会导致一个比严格需要的更大的框
box3.expandByObject(sphere);
console.log("box3 after expand", box3);

const vector = new THREE.Vector3();
// getSize()计算包围盒尺寸
box3.getSize(vector);
console.log("size", vector);
// 计算包围盒中心坐标
box3.getCenter(vector);
console.log("center", vector);

// 计算当前几何体的的边界矩形，该操作会更新已有 [param:.boundingBox]
box.geometry.computeBoundingBox();
let { min, max } = box.geometry.boundingBox;
console.log("box before scale", min, max);
box.geometry.scale(2, 2, 2);
box.geometry.computeBoundingBox();
({ min, max } = box.geometry.boundingBox);
console.log("box after scale", min, max);
//#endregion

//#region 展示二维地图
// prettier-ignore
const henan = [[116.195313,34.574631],[116.162049,34.459406],[116.213594,34.382216],[116.363529,34.316852],[116.372224,34.266126],[116.582428,34.275239],[116.527377,34.115649],[116.649202,33.971081],[116.641082,33.890138],[116.56404,33.907487],[116.437348,33.846547],[116.43261,33.795329],[116.161183,33.70816],[115.987036,33.901181],[115.967578,34.002103],[115.887282,34.032779],[115.84998,34.004729],[115.777607,34.073751],[115.653585,34.060102],[115.545887,33.880818],[115.633502,33.867323],[115.61425,33.775637],[115.563044,33.772167],[115.639743,33.585118],[115.421959,33.556792],[115.396816,33.501991],[115.34673,33.504868],[115.312846,33.374847],[115.361967,33.299813],[115.301484,33.14162],[115.13654,33.083197],[114.993996,33.100405],[114.954601,33.150815],[114.902936,33.129562],[114.936982,33.025508],[114.89181,33.020471],[114.890331,32.974511],[115.198598,32.854352],[115.199406,32.592687],[115.301153,32.588381],[115.310563,32.551887],[115.410428,32.576155],[115.562992,32.403434],[115.664963,32.408435],[115.699163,32.49432],[115.769849,32.505982],[115.783207,32.465548],[115.891566,32.576245],[115.929279,32.567223],[115.844527,32.504311],[115.883576,32.489256],[115.94194,32.165167],[115.910232,31.792338],[115.6778,31.778867],[115.496556,31.674227],[115.37158,31.495844],[115.373324,31.404828],[115.371837,31.404549],[115.369881,31.404558],[115.364423,31.403314],[115.361226,31.402023],[115.35673,31.399846],[115.356605,31.399748],[115.345724,31.401224],[115.345558,31.40132],[115.337167,31.402242],[115.337074,31.402101],[115.318519,31.385655],[115.317515,31.385224],[115.310509,31.3839],[115.31037,31.383852],[115.287971,31.398104],[115.287806,31.398168],[115.272907,31.397611],[115.271897,31.396967],[115.271789,31.396705],[115.271441,31.395853],[115.267824,31.390981],[115.267359,31.390366],[115.256452,31.392751],[115.254766,31.392188],[115.253927,31.397828],[115.254104,31.397836],[115.254368,31.397848],[115.254529,31.397855],[115.25678,31.401346],[115.256775,31.401493],[115.259352,31.405263],[115.259285,31.405404],[115.259135,31.405715],[115.258298,31.40643],[115.257367,31.407226],[115.257609,31.407469],[115.256833,31.416571],[115.256666,31.41658],[115.252093,31.421944],[115.251968,31.421938],[115.250496,31.421647],[115.250321,31.421612],[115.24859,31.421649],[115.248419,31.421671],[115.21904,31.42904],[115.218949,31.429163],[115.218197,31.430188],[115.218135,31.430328],[115.210752,31.449886],[115.211189,31.451414],[115.212918,31.454894],[115.212995,31.455047],[115.217295,31.480078],[115.217189,31.481819],[115.214367,31.486265],[115.214276,31.48642],[115.22014,31.503341],[115.220141,31.50352],[115.220555,31.509005],[115.220116,31.509408],[115.21875,31.510182],[115.218279,31.515866],[115.218372,31.515974],[115.220118,31.516664],[115.220155,31.516812],[115.220275,31.51729],[115.220316,31.517451],[115.221952,31.520101],[115.222069,31.520217],[115.222171,31.520318],[115.224669,31.523451],[115.224728,31.52361],[115.230261,31.536027],[115.231697,31.538651],[115.231459,31.53901],[115.230707,31.542643],[115.230752,31.542803],[115.232597,31.549958],[115.232734,31.550059],[115.236372,31.556565],[115.236271,31.556693],[115.223008,31.557096],[115.222857,31.557086],[115.217272,31.555165],[115.217134,31.554741],[115.21262,31.555273],[115.212487,31.555272],[115.210385,31.559214],[115.210722,31.559657],[115.192833,31.567078],[115.192932,31.567228],[115.1936,31.568904],[115.193643,31.569074],[115.186612,31.574102],[115.186547,31.574208],[115.178738,31.583823],[115.178689,31.583952],[115.177428,31.585822],[115.17725,31.586312],[115.175476,31.601003],[115.175298,31.601148],[115.17054,31.602861],[115.16951,31.603143],[115.166286,31.604366],[115.166148,31.604379],[115.148955,31.605522],[115.14776,31.605196],[115.147691,31.605178],[115.146487,31.605105],[115.143466,31.604903],[115.143317,31.604877],[115.140375,31.604595],[115.139119,31.603688],[115.128899,31.588623],[115.128915,31.588476],[115.129195,31.584668],[115.129259,31.584564],[115.126964,31.578566],[115.1249,31.577015],[115.119738,31.575668],[115.119596,31.575579],[115.105305,31.565201],[115.104984,31.564934],[115.103687,31.558995],[115.103717,31.558887],[115.107404,31.553216],[115.107567,31.55317],[115.108385,31.552944],[115.10856,31.552909],[115.108648,31.552892],[115.108823,31.552858],[115.108911,31.552841],[115.109086,31.552806],[115.112553,31.551689],[115.112534,31.55141],[115.105999,31.54523],[115.105977,31.545103],[115.105614,31.541836],[115.105625,31.541729],[115.094615,31.519075],[115.094482,31.519106],[115.094416,31.519122],[115.094281,31.519154],[115.096285,31.515381],[115.096535,31.515325],[115.092534,31.508509],[115.091813,31.508391],[115.087577,31.508713],[115.087427,31.508786],[115.082355,31.509432],[115.08219,31.509371],[115.072342,31.510883],[115.071916,31.51069],[115.07119,31.510629],[115.070779,31.510922],[115.069464,31.511247],[115.069308,31.511244],[115.06553,31.512294],[115.065279,31.513118],[115.060753,31.51301],[115.060618,31.51305],[115.053393,31.513908],[115.053232,31.513876],[115.050469,31.516673],[115.05051,31.516954],[115.044619,31.515661],[115.044505,31.515572],[115.040632,31.51675],[115.03972,31.51726],[115.034391,31.520757],[115.034232,31.520821],[115.029193,31.528197],[115.029061,31.528212],[115.022099,31.523284],[115.022067,31.523059],[115.009086,31.493611],[115.009097,31.493457],[115.008937,31.492778],[115.008899,31.492616],[115.008872,31.492499],[115.008838,31.492354],[115.009088,31.491272],[115.009732,31.487261],[115.009508,31.487189],[115.006048,31.485849],[115.005877,31.485822],[115.002138,31.484546],[115.001374,31.483821],[114.999349,31.471286],[114.998785,31.470603],[114.991671,31.477081],[114.991345,31.47842],[114.961607,31.492876],[114.961568,31.492727],[114.942882,31.47893],[114.942032,31.4787],[114.940188,31.47304],[114.940372,31.471495],[114.936976,31.472002],[114.934701,31.472792],[114.932009,31.474614],[114.931752,31.474764],[114.929531,31.475983],[114.92941,31.476047],[114.924339,31.47897],[114.924326,31.480435],[114.899633,31.474561],[114.89946,31.474547],[114.894512,31.473648],[114.893741,31.473432],[114.881213,31.470199],[114.881098,31.470123],[114.876783,31.471814],[114.877583,31.472857],[114.87513,31.478371],[114.873347,31.478464],[114.861871,31.479492],[114.860536,31.479143],[114.854892,31.476198],[114.85428,31.476851],[114.850183,31.475473],[114.84982,31.473004],[114.849841,31.469649],[114.849606,31.46892],[114.835083,31.458745],[114.83469,31.458981],[114.831004,31.460235],[114.831031,31.460344],[114.828764,31.463231],[114.827687,31.464596],[114.823154,31.472584],[114.823069,31.472703],[114.810683,31.479571],[114.810558,31.479571],[114.782667,31.484358],[114.781374,31.485652],[114.784541,31.495123],[114.783969,31.497187],[114.779676,31.521261],[114.778437,31.521397],[114.765855,31.524099],[114.765521,31.524147],[114.757762,31.527749],[114.755394,31.528072],[114.753485,31.523084],[114.753394,31.522203],[114.750163,31.523223],[114.748139,31.523998],[114.72604,31.520096],[114.725243,31.519751],[114.719875,31.520341],[114.719857,31.521274],[114.71978,31.522692],[114.718955,31.525696],[114.667482,31.551231],[114.666181,31.551809],[114.617616,31.585882],[114.616699,31.585447],[114.609115,31.57772],[114.606978,31.576535],[114.580489,31.560229],[114.579383,31.55998],[114.548994,31.613575],[114.549099,31.613933],[114.54865,31.62242],[114.549187,31.623248],[114.551256,31.641461],[114.550082,31.642866],[114.550325,31.644386],[114.553506,31.646049],[114.553828,31.6463],[114.554077,31.646494],[114.571147,31.658709],[114.572034,31.659239],[114.580432,31.711721],[114.583075,31.712978],[114.58256,31.716658],[114.582237,31.717105],[114.582178,31.717374],[114.581958,31.718385],[114.582972,31.727002],[114.584998,31.729138],[114.586972,31.761177],[114.586677,31.761632],[114.569768,31.768803],[114.568939,31.768353],[114.527111,31.753405],[114.526853,31.753671],[114.511088,31.746284],[114.510539,31.743928],[114.49485,31.742187],[114.494625,31.743749],[114.471052,31.739617],[114.470241,31.739531],[114.45086,31.737317],[114.452119,31.73487],[114.451523,31.728807],[114.450928,31.728366],[114.408594,31.747882],[114.406635,31.748811],[114.402378,31.7483],[114.401358,31.748324],[114.389434,31.741417],[114.389163,31.741196],[114.387446,31.741423],[114.385433,31.742233],[114.379818,31.744928],[114.379138,31.744667],[114.370372,31.747394],[114.367415,31.747911],[114.354978,31.753656],[114.353277,31.7548],[114.334826,31.75449],[114.333558,31.754504],[114.282002,31.76783],[114.281659,31.768238],[114.273923,31.781132],[114.27259,31.781886],[114.250546,31.80845],[114.249261,31.810927],[114.235398,31.833837],[114.2367,31.835871],[114.236821,31.836074],[114.237349,31.836963],[114.2375,31.839065],[114.237237,31.84022],[114.216097,31.837315],[114.214879,31.837727],[114.212574,31.840753],[114.212333,31.841047],[114.203015,31.844603],[114.200187,31.84512],[114.193229,31.851305],[114.192921,31.851487],[114.189543,31.851356],[114.187579,31.851761],[114.13273,31.842734],[114.132607,31.841206],[114.130577,31.837549],[114.129315,31.836609],[114.121475,31.819074],[114.121153,31.818532],[114.120808,31.817284],[114.121227,31.80821],[114.119358,31.805856],[114.118051,31.805461],[114.108863,31.805896],[114.105843,31.805948],[114.100725,31.802643],[114.099388,31.801947],[114.082754,31.783925],[114.080329,31.78449],[114.046747,31.772748],[114.045558,31.773272],[114.042019,31.773118],[114.039563,31.772715],[114.036592,31.769412],[114.035893,31.769545],[114.030576,31.772117],[114.029119,31.772463],[114.024223,31.771376],[114.022424,31.771285],[114.020996,31.771307],[114.020314,31.771586],[114.007928,31.765424],[114.007083,31.764082],[114.002279,31.759201],[114.001351,31.758429],[113.994237,31.753957],[113.993647,31.753196],[113.981751,31.753134],[113.979535,31.754793],[113.975457,31.759161],[113.974903,31.761527],[113.968509,31.780452],[113.969958,31.781184],[113.970017,31.782462],[113.96949,31.78296],[113.966227,31.785208],[113.965394,31.785435],[113.958646,31.788439],[113.956021,31.789877],[113.953766,31.808929],[113.953633,31.809764],[113.949598,31.817081],[113.948722,31.817642],[113.948178,31.819526],[113.947888,31.825077],[113.950332,31.828252],[113.95094,31.829042],[113.950959,31.829688],[113.943746,31.863043],[113.943195,31.863481],[113.935792,31.878714],[113.935636,31.879519],[113.913637,31.873739],[113.912303,31.872989],[113.905099,31.863511],[113.904969,31.86336],[113.902571,31.859329],[113.902882,31.858094],[113.88934,31.848707],[113.888711,31.848276],[113.879683,31.844134],[113.879334,31.843586],[113.85648,31.843572],[113.855818,31.843722],[113.840108,31.853134],[113.839841,31.853522],[113.837334,31.861348],[113.838923,31.86372],[113.836985,31.871249],[113.836679,31.871405],[113.834726,31.901244],[113.835557,31.902429],[113.836335,31.911269],[113.835118,31.91279],[113.833357,31.915061],[113.833314,31.916433],[113.824715,31.920385],[113.824109,31.92103],[113.817668,31.923867],[113.816955,31.924301],[113.807294,31.936081],[113.807227,31.936629],[113.807098,31.939256],[113.806494,31.941483],[113.807105,31.94547],[113.807163,31.945954],[113.810164,31.956222],[113.811956,31.957513],[113.819396,31.967281],[113.819149,31.96741],[113.776159,31.980449],[113.775915,31.980756],[113.768086,31.980186],[113.766187,31.982847],[113.761877,31.987349],[113.760346,31.987752],[113.758499,32.001011],[113.758363,32.001716],[113.761936,32.005454],[113.763915,32.006616],[113.767179,32.010779],[113.768488,32.014228],[113.780973,32.022653],[113.781838,32.024333],[113.792636,32.035917],[113.792638,32.037022],[113.791584,32.037804],[113.790585,32.03788],[113.784632,32.045766],[113.783643,32.046984],[113.773487,32.05142],[113.772685,32.05161],[113.746575,32.070849],[113.745536,32.072806],[113.725817,32.086149],[113.725401,32.087027],[113.725512,32.087317],[113.725711,32.087856],[113.726618,32.090476],[113.727774,32.091456],[113.725209,32.11917],[113.723709,32.119962],[113.734295,32.122455],[113.734647,32.12128],[113.764513,32.132116],[113.765131,32.132901],[113.764401,32.143846],[113.76447,32.144199],[113.783315,32.187033],[113.782997,32.18846],[113.782064,32.193898],[113.782403,32.194579],[113.781811,32.196021],[113.781635,32.196181],[113.777536,32.208161],[113.777244,32.208664],[113.762058,32.206647],[113.761963,32.207779],[113.751555,32.22246],[113.7516,32.223488],[113.750222,32.262578],[113.750521,32.263971],[113.752517,32.266759],[113.751083,32.270786],[113.751973,32.293562],[113.753555,32.294691],[113.773716,32.303318],[113.773842,32.305053],[113.769612,32.309575],[113.768085,32.310241],[113.769832,32.317087],[113.768517,32.317121],[113.763637,32.353809],[113.768037,32.35604],[113.771595,32.360302],[113.771375,32.361747],[113.757954,32.361872],[113.756905,32.36129],[113.753627,32.361272],[113.752594,32.362073],[113.744562,32.3743],[113.745221,32.375301],[113.748925,32.391136],[113.748358,32.391373],[113.747258,32.393335],[113.746782,32.39354],[113.736964,32.396231],[113.737324,32.398218],[113.73836,32.400533],[113.737714,32.403293],[113.737629,32.403532],[113.691587,32.416347],[113.690257,32.416711],[113.672638,32.417959],[113.670653,32.419153],[113.669583,32.419954],[113.666872,32.4214],[113.665432,32.415453],[113.667332,32.413997],[113.659442,32.411105],[113.657905,32.41323],[113.648128,32.407718],[113.647512,32.407221],[113.640472,32.393343],[113.639377,32.389591],[113.632181,32.3845],[113.629681,32.383357],[113.625128,32.368922],[113.625282,32.367212],[113.615498,32.358119],[113.612522,32.3592],[113.55282,32.325847],[113.554219,32.324536],[113.566569,32.301185],[113.565052,32.300659],[113.554479,32.304157],[113.552811,32.304589],[113.549183,32.316603],[113.551138,32.317969],[113.524874,32.327416],[113.524606,32.326986],[113.509032,32.316141],[113.507417,32.315811],[113.493593,32.307692],[113.492947,32.306326],[113.490839,32.305081],[113.49003,32.302759],[113.467436,32.295471],[113.466962,32.293814],[113.458924,32.292048],[113.457078,32.290928],[113.453445,32.288745],[113.452266,32.287742],[113.408407,32.281323],[113.406751,32.280646],[113.40491,32.280727],[113.404713,32.281359],[113.395366,32.284536],[113.396697,32.286277],[113.380907,32.299381],[113.380019,32.299721],[113.325362,32.318172],[113.321272,32.320328],[113.318472,32.323375],[113.319216,32.325461],[113.325793,32.332295],[113.3265,32.332464],[113.310413,32.350279],[113.309047,32.350184],[113.302648,32.352921],[113.29946,32.35396],[113.276243,32.38145],[113.275442,32.383496],[113.259584,32.391269],[113.256446,32.393086],[113.25637,32.39313],[113.256521,32.394601],[113.232184,32.414357],[113.231219,32.415289],[113.205108,32.432454],[113.204378,32.431894],[113.166838,32.419385],[113.166797,32.419047],[113.160199,32.40141],[113.159728,32.400409],[113.155624,32.388275],[113.155343,32.387034],[113.155401,32.379944],[113.153776,32.379105],[113.130964,32.377637],[113.126822,32.377658],[113.125799,32.376871],[113.124047,32.376774],[113.119536,32.375798],[113.118857,32.376369],[113.115613,32.384657],[113.115599,32.384926],[113.093493,32.398112],[113.089663,32.398138],[113.072412,32.398806],[113.071857,32.398853],[113.05215,32.417333],[113.051896,32.417534],[113.045788,32.420775],[113.04364,32.421236],[112.999095,32.413053],[112.996426,32.41189],[112.992416,32.40482],[112.991522,32.401377],[112.98856,32.368355],[112.985597,32.368972],[112.891453,32.382892],[112.891086,32.382543],[112.878246,32.380011],[112.877945,32.38029],[112.849202,32.387977],[112.846541,32.385649],[112.845182,32.383489],[112.811705,32.370219],[112.810654,32.370304],[112.809479,32.370215],[112.781438,32.356699],[112.779249,32.358797],[112.767028,32.34468],[112.763859,32.34468],[112.756406,32.343753],[112.751207,32.344256],[112.748692,32.346104],[112.710072,32.352554],[112.709597,32.35289],[112.687101,32.36026],[112.685113,32.360566],[112.683548,32.360934],[112.682505,32.361179],[112.68143,32.361523],[112.669735,32.369376],[112.666202,32.36654],[112.6632,32.360918],[112.663725,32.363337],[112.662736,32.365666],[112.661032,32.366543],[112.649389,32.372935],[112.6494,32.372329],[112.648261,32.371516],[112.647313,32.373511],[112.618106,32.381077],[112.617957,32.380736],[112.616017,32.381394],[112.615378,32.381036],[112.603148,32.38511],[112.602818,32.385306],[112.552381,32.402049],[112.551677,32.402243],[112.543748,32.398498],[112.545103,32.397761],[112.538758,32.385578],[112.538284,32.38523],[112.503276,32.379641],[112.501384,32.379586],[112.451191,32.343465],[112.411455,32.365022],[112.410783,32.365321],[112.406497,32.366716],[112.380917,32.365978],[112.379443,32.366095],[112.364011,32.367967],[112.363024,32.367558],[112.36133,32.366733],[112.361072,32.366608],[112.342719,32.349072],[112.339415,32.348399],[112.277508,32.351341],[112.276039,32.352617],[112.262298,32.359443],[112.260617,32.359093],[112.247204,32.369306],[112.247137,32.369577],[112.226623,32.381392],[112.226218,32.381788],[112.207657,32.386637],[112.206429,32.384637],[112.185978,32.388974],[112.185099,32.388474],[112.185004,32.38845],[112.182628,32.387095],[112.182137,32.386828],[112.180118,32.386433],[112.176927,32.391487],[112.177636,32.391621],[112.178906,32.394654],[112.178493,32.395301],[112.177797,32.395574],[112.172098,32.399348],[112.171888,32.400328],[112.172832,32.403179],[112.173311,32.406674],[112.174778,32.408223],[112.17445,32.408746],[112.169403,32.409006],[112.16952,32.410082],[112.160566,32.410377],[112.16054,32.411128],[112.158432,32.410549],[112.156906,32.409807],[112.148551,32.410156],[112.146445,32.409207],[112.14631,32.406024],[112.146601,32.405082],[112.147138,32.403246],[112.148411,32.402309],[112.158708,32.391367],[112.157841,32.392072],[112.15714,32.396627],[112.15595,32.395994],[112.155727,32.390476],[112.153706,32.388718],[112.144216,32.385014],[112.142595,32.386787],[112.132178,32.402376],[112.130823,32.403307],[112.126086,32.398957],[112.124497,32.399225],[112.123701,32.396656],[112.124401,32.396217],[112.091408,32.419016],[112.088429,32.419591],[112.072542,32.438798],[112.071669,32.439292],[112.067885,32.450357],[112.068794,32.452238],[112.069084,32.453657],[112.011647,32.450764],[112.009738,32.45236],[111.975112,32.476472],[111.974833,32.477205],[111.967882,32.493832],[111.966252,32.496898],[111.957134,32.512624],[111.95434,32.512918],[111.946584,32.517818],[111.945041,32.518659],[111.944865,32.518719],[111.94166,32.51925],[111.932349,32.511249],[111.930135,32.510067],[111.917602,32.505083],[111.914932,32.50432],[111.907222,32.502978],[111.906536,32.502103],[111.892369,32.499819],[111.890582,32.501088],[111.877927,32.504664],[111.875327,32.508355],[111.874098,32.507836],[111.872872,32.507474],[111.868262,32.510113],[111.867465,32.511683],[111.825407,32.538879],[111.824069,32.539015],[111.809547,32.537673],[111.808653,32.537877],[111.805177,32.540747],[111.804526,32.541009],[111.801946,32.542045],[111.800159,32.542762],[111.797529,32.543075],[111.788432,32.546089],[111.788021,32.54741],[111.777525,32.56058],[111.775325,32.560362],[111.76466,32.557023],[111.764393,32.557825],[111.745336,32.578461],[111.743622,32.583333],[111.729882,32.593227],[111.727579,32.595676],[111.719858,32.603428],[111.718198,32.605404],[111.713842,32.606629],[111.710871,32.606053],[111.698438,32.610201],[111.698018,32.610063],[111.671307,32.614568],[111.669576,32.61446],[111.644204,32.603322],[111.64209,32.608706],[111.641461,32.608838],[111.640345,32.608827],[111.637775,32.616369],[111.637199,32.618028],[111.622645,32.627973],[111.621552,32.626861],[111.583195,32.591834],[111.582444,32.591189],[111.552009,32.610194],[111.550126,32.61002],[111.546047,32.613205],[111.545184,32.613538],[111.539208,32.614202],[111.533041,32.61681],[111.531759,32.645161],[111.531683,32.646416],[111.530772,32.648127],[111.528654,32.651068],[111.524957,32.655295],[111.524548,32.656591],[111.522877,32.661392],[111.521556,32.663925],[111.491672,32.687463],[111.489898,32.689908],[111.486204,32.692447],[111.485184,32.692948],[111.469305,32.70686],[111.469983,32.707485],[111.470803,32.708241],[111.471889,32.709573],[111.469989,32.719195],[111.468655,32.719345],[111.425767,32.732945],[111.425529,32.734553],[111.441925,32.727929],[111.444432,32.727121],[111.44397,32.736805],[111.445644,32.735302],[111.460547,32.729578],[111.464419,32.73361],[111.469257,32.739822],[111.470114,32.741043],[111.468888,32.745598],[111.468751,32.746219],[111.468532,32.749736],[111.470041,32.751271],[111.461104,32.765473],[111.461103,32.764392],[111.447572,32.761829],[111.446332,32.761637],[111.445914,32.758411],[111.446036,32.75815],[111.43241,32.750699],[111.430777,32.751578],[111.370222,32.825706],[111.371037,32.827499],[111.347681,32.834409],[111.343388,32.83532],[111.338762,32.835624],[111.337361,32.835228],[111.329148,32.83337],[111.328149,32.836611],[111.322106,32.843965],[111.32174,32.84434],[111.321268,32.84459],[111.319696,32.844904],[111.297823,32.853811],[111.295896,32.854225],[111.284775,32.872083],[111.287618,32.872402],[111.296941,32.890267],[111.296676,32.890825],[111.26848,32.890867],[111.267061,32.88892],[111.249845,32.908733],[111.249176,32.910724],[111.247383,32.91188],[111.252052,32.949415],[111.252332,32.950357],[111.273025,32.958899],[111.273266,32.960148],[111.27615,32.98625],[111.276152,32.987549],[111.265733,32.990053],[111.264471,32.991736],[111.26158,32.999256],[111.261004,33.005947],[111.259373,33.008449],[111.256545,33.011178],[111.255389,33.012392],[111.247571,33.015695],[111.24782,33.016849],[111.244669,33.032667],[111.242485,33.035316],[111.238888,33.03804],[111.232442,33.039986],[111.209962,33.042221],[111.209624,33.042035],[111.208949,33.041664],[111.207097,33.040644],[111.194938,33.039446],[111.193854,33.039175],[111.189294,33.039241],[111.189005,33.039555],[111.173865,33.046908],[111.17008,33.04674],[111.152769,33.042555],[111.151471,33.046432],[111.157702,33.051642],[111.162947,33.052452],[111.182635,33.063818],[111.186423,33.063552],[111.188088,33.064886],[111.188961,33.065576],[111.198248,33.07684],[111.195115,33.078826],[111.192742,33.091625],[111.191626,33.093629],[111.177988,33.097784],[111.17852,33.100195],[111.145376,33.128337],[111.145356,33.128528],[111.133994,33.136702],[111.133534,33.136934],[111.129048,33.151237],[111.129417,33.155175],[111.114233,33.163499],[111.112677,33.163669],[111.105359,33.167224],[111.105488,33.167597],[111.106139,33.169472],[111.101022,33.172443],[111.100819,33.172459],[111.090116,33.171727],[111.089165,33.172412],[111.090788,33.183481],[111.088978,33.183076],[111.067463,33.171714],[111.065495,33.169308],[111.037514,33.154953],[111.037384,33.156116],[111.061985,33.193151],[111.060213,33.193723],[111.053219,33.196562],[111.052755,33.196898],[111.026844,33.213361],[111.024583,33.215439],[111.014174,33.227525],[111.014011,33.22788],[111.013272,33.229074],[111.012469,33.230029],[111.011551,33.230791],[111.010867,33.231235],[110.996405,33.24643],[110.997372,33.247257],[110.995136,33.252143],[110.995747,33.256637],[110.990521,33.261005],[110.982875,33.270077],[110.983986,33.271848],[110.99066,33.274855],[110.991276,33.276082],[110.990362,33.279494],[110.991197,33.280859],[110.994439,33.282905],[110.997084,33.2873],[110.997873,33.290954],[110.996717,33.298171],[110.998487,33.301421],[111.026049,33.330397],[111.029503,33.336421],[111.023027,33.354866],[111.027195,33.365486],[111.027065,33.371211],[111.003954,33.419824],[110.996718,33.435959],[110.999396,33.439682],[111.007305,33.443267],[111.025439,33.504919],[111.02143,33.514545],[111.002841,33.53556],[111.004202,33.541793],[111.003671,33.548081],[111.009636,33.557884],[111.009959,33.560529],[111.008573,33.566094],[111.0037,33.578671],[110.9958,33.583731],[110.992818,33.587643],[110.966565,33.609199],[110.959612,33.60986],[110.952887,33.608376],[110.948412,33.611718],[110.942579,33.618759],[110.932389,33.621626],[110.911085,33.6274],[110.904734,33.628635],[110.89974,33.632984],[110.89248,33.634368],[110.884641,33.633758],[110.878827,33.634645],[110.875158,33.63819],[110.861862,33.653928],[110.857726,33.657814],[110.843612,33.662378],[110.837986,33.666884],[110.834372,33.672371],[110.833176,33.677809],[110.830559,33.680753],[110.8232,33.692856],[110.828862,33.702013],[110.828039,33.707259],[110.831446,33.711073],[110.832148,33.713878],[110.831386,33.715994],[110.82693,33.719411],[110.821652,33.726708],[110.817716,33.734178],[110.816841,33.737366],[110.81723,33.751138],[110.799127,33.775522],[110.790705,33.776769],[110.78419,33.782402],[110.785188,33.78816],[110.783427,33.790982],[110.782195,33.796066],[110.774028,33.797599],[110.765562,33.795018],[110.753693,33.799491],[110.750052,33.797374],[110.741343,33.79881],[110.725987,33.80773],[110.724866,33.814368],[110.711529,33.834373],[110.70756,33.835865],[110.69224,33.837881],[110.684935,33.838779],[110.677979,33.845052],[110.67138,33.847464],[110.667201,33.852627],[110.662543,33.852735],[110.659096,33.851702],[110.649468,33.845971],[110.644786,33.844965],[110.635955,33.847714],[110.633049,33.847695],[110.628178,33.84556],[110.613173,33.850713],[110.611931,33.854164],[110.613235,33.861562],[110.612549,33.868472],[110.611367,33.869236],[110.599961,33.871423],[110.598997,33.875447],[110.596852,33.879046],[110.587859,33.88581],[110.587278,33.887718],[110.588832,33.891272],[110.589891,33.897838],[110.601023,33.903417],[110.610553,33.907781],[110.621905,33.907303],[110.627609,33.908394],[110.628584,33.910246],[110.627879,33.913419],[110.623731,33.918012],[110.623523,33.918952],[110.624019,33.921303],[110.626019,33.924596],[110.628524,33.925655],[110.633377,33.925823],[110.639798,33.932413],[110.65052,33.936718],[110.654167,33.937488],[110.665362,33.938066],[110.671492,33.940956],[110.676916,33.949251],[110.672817,33.964095],[110.671998,33.965855],[110.653438,33.969158],[110.651759,33.969683],[110.649844,33.971559],[110.65108,33.979818],[110.648871,33.9938],[110.638219,34.006072],[110.636854,34.009494],[110.634744,34.016091],[110.630683,34.017512],[110.627744,34.019549],[110.62794,34.022708],[110.631504,34.023763],[110.631789,34.024779],[110.630859,34.026252],[110.626077,34.030151],[110.624169,34.033837],[110.619467,34.035643],[110.615543,34.034212],[110.615438,34.025696],[110.612092,34.024255],[110.595917,34.023447],[110.591923,34.023948],[110.587488,34.023334],[110.58649,34.024598],[110.588374,34.029238],[110.589754,34.038594],[110.588904,34.039535],[110.583472,34.041288],[110.582005,34.042816],[110.589173,34.044903],[110.587886,34.047666],[110.589998,34.048536],[110.590029,34.050898],[110.586413,34.051748],[110.586261,34.053258],[110.589404,34.054161],[110.590048,34.054953],[110.590586,34.057715],[110.589999,34.058437],[110.587919,34.058641],[110.588511,34.060244],[110.588217,34.0614],[110.590685,34.062206],[110.592739,34.065492],[110.593694,34.065368],[110.595165,34.06475],[110.595426,34.072556],[110.590731,34.096854],[110.591782,34.101673],[110.604947,34.108723],[110.61401,34.11372],[110.618184,34.124033],[110.6226,34.125389],[110.625009,34.136204],[110.624244,34.137965],[110.634073,34.144764],[110.641495,34.156055],[110.641965,34.160875],[110.639843,34.162693],[110.636493,34.167977],[110.634136,34.169797],[110.625369,34.172549],[110.621778,34.177424],[110.617831,34.177273],[110.596494,34.179445],[110.587734,34.178685],[110.587388,34.1818],[110.590443,34.188615],[110.589089,34.190261],[110.574705,34.192065],[110.568305,34.191193],[110.562792,34.193846],[110.557168,34.193387],[110.556345,34.195857],[110.553235,34.199241],[110.553824,34.202121],[110.544505,34.214894],[110.540279,34.217196],[110.533197,34.217274],[110.522117,34.21986],[110.51972,34.219456],[110.512866,34.216596],[110.50789,34.217612],[110.501504,34.223625],[110.494833,34.227552],[110.489736,34.232328],[110.481246,34.234174],[110.472338,34.235255],[110.445608,34.241337],[110.439688,34.243402],[110.438041,34.245579],[110.437868,34.247049],[110.442497,34.254007],[110.432589,34.272914],[110.426483,34.276092],[110.42854,34.287964],[110.432643,34.290838],[110.441035,34.289711],[110.449304,34.291461],[110.454347,34.294536],[110.456989,34.297234],[110.461095,34.304103],[110.462793,34.305274],[110.465841,34.305914],[110.467192,34.307378],[110.46889,34.311371],[110.474631,34.323493],[110.483711,34.320235],[110.50005,34.320952],[110.501339,34.323653],[110.500812,34.327767],[110.502691,34.345189],[110.499178,34.350489],[110.476852,34.38741],[110.474047,34.39171],[110.473953,34.396164],[110.476533,34.404882],[110.476802,34.407652],[110.475936,34.40913],[110.473313,34.410108],[110.467417,34.409751],[110.458167,34.402412],[110.455083,34.402001],[110.443429,34.404838],[110.430987,34.409447],[110.402932,34.433472],[110.403598,34.434795],[110.401302,34.437127],[110.402899,34.437341],[110.403094,34.437904],[110.400434,34.439997],[110.400936,34.443265],[110.40264,34.445951],[110.402572,34.446928],[110.399426,34.449461],[110.398522,34.453032],[110.395148,34.45406],[110.394844,34.457576],[110.392996,34.460034],[110.393436,34.464826],[110.391394,34.467059],[110.386521,34.469843],[110.384504,34.472996],[110.383916,34.475259],[110.383276,34.476587],[110.380044,34.478272],[110.379293,34.481413],[110.377794,34.482223],[110.37818,34.48317],[110.377363,34.48361],[110.378423,34.485288],[110.376801,34.486912],[110.377044,34.488068],[110.375911,34.488228],[110.374653,34.490102],[110.372798,34.490338],[110.367487,34.495128],[110.3672,34.499703],[110.365308,34.504616],[110.363601,34.509974],[110.363816,34.511851],[110.360488,34.517607],[110.360653,34.519672],[110.372212,34.542831],[110.374569,34.545095],[110.388159,34.550973],[110.402331,34.556499],[110.404867,34.558669],[110.404268,34.565964],[110.399334,34.562846],[110.367178,34.566785],[110.366804,34.569925],[110.374136,34.587252],[110.37918,34.600531],[110.466789,34.618779],[110.540164,34.581935],[110.741166,34.639232],[110.74551,34.645505],[110.780705,34.648629],[110.791784,34.645241],[110.870723,34.635943],[110.919788,34.73024],[110.976295,34.706445],[111.122787,34.759166],[111.160725,34.814594],[111.228098,34.789144],[111.431015,34.829286],[111.43402,34.831549],[111.570791,34.843317],[111.681233,34.949769],[111.665078,34.985793],[111.815586,35.067432],[111.973353,35.070236],[111.974961,35.068498],[112.062138,35.055783],[112.058815,35.279896],[112.066408,35.277705],[112.300789,35.253775],[112.289961,35.217068],[112.567848,35.211745],[112.637229,35.225678],[112.634798,35.265469],[112.712651,35.187008],[112.814108,35.253627],[112.814761,35.256492],[112.91134,35.246711],[112.98632,35.316614],[112.986296,35.318188],[112.996485,35.362171],[113.126562,35.332239],[113.170387,35.387765],[113.169276,35.3882],[113.190025,35.449059],[113.30328,35.426686],[113.312347,35.481261],[113.506603,35.516504],[113.548731,35.658041],[113.624855,35.632013],[113.582829,35.821959],[113.656873,35.836643],[113.637827,35.988464],[113.69904,36.022446],[113.65536,36.126437],[113.713757,36.132975],[113.650921,36.173482],[113.698435,36.182872],[113.731467,36.363373],[113.88194,36.353858],[113.908566,36.316158],[113.910663,36.315059],[113.953183,36.358179],[113.993846,36.314577],[113.980749,36.359058],[114.046401,36.30546],[114.041328,36.304895],[114.056732,36.286289],[114.057956,36.285681],[114.060583,36.276501],[114.068083,36.272858],[114.345149,36.255799],[114.452293,36.202387],[114.460212,36.201092],[114.558587,36.153005],[114.568046,36.152307],[114.588758,36.118464],[114.734418,36.155783],[114.771318,36.12453],[114.912447,36.140425],[114.920162,36.048207],[115.045927,36.112227],[115.062702,36.178221],[115.16,36.193116],[115.166082,36.191535],[115.17069,36.190973],[115.175757,36.192718],[115.242119,36.19124],[115.318903,36.086963],[115.405082,36.159917],[115.483548,36.149008],[115.447507,36.011818],[115.356502,35.954622],[115.363146,35.779459],[115.495117,35.920194],[115.503398,35.888705],[115.64607,35.920814],[116.100243,36.104668],[116.047836,35.969278],[115.911826,35.960277],[115.863087,35.855536],[115.734851,35.832928],[115.693548,35.754068],[115.511517,35.727153],[115.365478,35.560509],[115.3319,35.586265],[115.356502,35.496835],[115.023883,35.372185],[114.931468,35.196343],[114.84105,35.15924],[114.883747,35.103362],[114.824469,35.012244],[114.877117,35.0252],[114.923795,34.968728],[115.128089,35.004362],[115.156934,34.958015],[115.219123,34.960612],[115.189212,34.914825],[115.252141,34.906583],[115.243493,34.850167],[115.426781,34.805411],[115.461388,34.637266],[115.548609,34.568814],[115.684406,34.555595],[115.703788,34.599708],[115.826984,34.557868],[115.978355,34.581982],[116.002843,34.6238],[116.146869,34.553188],[116.195313,34.574631]]
const pointsArr = []; // 一组二维向量表示一个多边形轮廓坐标
henan.forEach(function (e) {
  // data坐标数据转化为Vector2构成的顶点数组
  const v2 = new THREE.Vector2((e[0] - 100) * 20, (e[1] - 30) * 20);
  pointsArr.push(v2);
});

const map = new THREE.Shape(pointsArr);

const meshMap = new THREE.Mesh(
  new THREE.ShapeGeometry(map),
  new THREE.MeshBasicMaterial({ color: 0xff0000, side: THREE.DoubleSide })
);
scene.add(meshMap);

// 包围盒计算模型对象的大小和位置
const mapBox = new THREE.Box3();
mapBox.expandByObject(meshMap); // 计算模型包围盒
const size = new THREE.Vector3();
mapBox.getSize(size); // 计算包围盒尺寸
console.log("模型包围盒尺寸", size);
const center = new THREE.Vector3();
mapBox.getCenter(center); // 计算包围盒中心坐标
console.log("模型中心坐标", center);

// 地图平行于canvas画布
camera.position.set(center.x, center.y, center.z + 100);
updateOrbitControl(center); //与lookAt参数保持一致
//#endregion

//#region 相机动画
// 动画类型变量
let animation = "";
//用于圆周运动的参数
let angle = 0;
const R = 100;
// 动画渲染函数
function render() {
  if (animation === "move") {
    //相机直线运动动画
    camera.position.x -= 0.5;
    // 相机视角更新
    camera.lookAt(0, 0, 0);
  } else if (animation === "circle") {
    //相机圆周运动动画
    angle += 0.01;
    camera.position.x = R * Math.cos(angle);
    camera.position.z = R * Math.sin(angle);
    // 相机视角更新
    camera.lookAt(0, 0, 0);
  }
  renderer.render(scene, camera);
  requestAnimationFrame(render);
}
render();

// 构建控制动画Dom
const animateBtnDiv = document.createElement("div");
animateBtnDiv.style = "position: absolute; top: 50px; left: 10px";
const label = document.createElement("label");
label.textContent = "相机动画 ";
animateBtnDiv.appendChild(label);
// 重置相机位置
function resetCamera() {
  camera.position.set(100, 100, 100);
  updateOrbitControl(new THREE.Vector3(0, 0, 0));
}
// 添加按钮函数
const addRadio = (text, value) => {
  const input = document.createElement("input");
  input.type = "radio";
  input.name = "cameraAnimate";
  input.value = value;
  input.onchange = () => {
    resetCamera();
    if (input.checked) animation = input.value;
  };
  const label = document.createElement("label");
  label.appendChild(input);
  label.appendChild(document.createTextNode(text));
  return label;
};
// 添加动画按钮
animateBtnDiv.appendChild(addRadio("无动画", ""));
animateBtnDiv.appendChild(addRadio("直线移动", "move"));
animateBtnDiv.appendChild(addRadio("圆周移动", "circle"));
document.body.appendChild(animateBtnDiv);
//#endregion

//#region 不同方向投影视图
// 创建参考模型
const exampleMesh = new THREE.Mesh(
  new THREE.BoxGeometry(100, 50, 20),
  new THREE.MeshNormalMaterial()
);
scene.add(exampleMesh);

// 计算模型尺寸和中心点位置
const meshBox = new THREE.Box3();
meshBox.expandByObject(exampleMesh);
const {
  x: centerX,
  y: centerY,
  z: centerZ,
} = meshBox.getCenter(new THREE.Vector3());
const meshSize = meshBox.getSize(new THREE.Vector3());
const maxSize = Math.max(meshSize.x / 1.2, meshSize.y / 1.2, meshSize.z / 1.2);
console.log("exampleMesh", meshSize, maxSize);

// 创建按钮工具函数
let btnCount = 0;
function addBtn(text, callback) {
  const btn = document.createElement("button");
  btn.textContent = text;
  btn.addEventListener("click", callback);

  btn.style.position = "absolute";
  btn.style.top = "10px";
  btn.style.left = `${btnCount++ * 50}px`;
  document.body.appendChild(btn);
  return btn;
}
// 定义不同方向投影视图函数
const getCallback = (
  cameraPosition,
  lookAtPosition = new THREE.Vector3(centerX, centerY, centerZ)
) => {
  return () => {
    // debugger;
    const { x, y, z } = cameraPosition;
    camera.position.set(x, y, z);
    updateOrbitControl(lookAtPosition);
  };
};

// 添加不同方向投影视图按钮
const xoyBtn = addBtn(
  "正视图",
  getCallback(new THREE.Vector3(centerX, centerY, centerZ + maxSize))
);
const xozBtn = addBtn(
  "上视图",
  getCallback(new THREE.Vector3(centerX, centerY + maxSize, centerZ))
);
const yozBtn = addBtn(
  "侧视图",
  getCallback(new THREE.Vector3(centerX - maxSize, centerY, centerZ))
);
//#endregion

//#region 相机上方向
// .up是相机对象的上方向属性, 默认值是new THREE.Vector3(0,1,0), 意思是沿着y轴朝上
console.log(".up默认值", camera.up);
// 改变相机的上方向.up属性值可以看到坐标轴的变化
// camera.up.set(0, 0, 1); // 沿
// camera.lookAt(0, 0, 0);
//#endregion

//#region 管道漫游动画
// 构建管道路径
const tubeCurve = new THREE.CurvePath();
tubeCurve.add(
  new THREE.LineCurve3(
    new THREE.Vector3(-300, 0, 100),
    new THREE.Vector3(-120, 0, 110)
  )
);
const points1 = [
  new THREE.Vector3(-120, 0, 110),
  new THREE.Vector3(10, 0, 120),
  new THREE.Vector3(-170, 0, 200),
  new THREE.Vector3(-130, 0, 220),
];
tubeCurve.add(new THREE.CubicBezierCurve3(...points1));
const points2 = [
  new THREE.Vector3(-130, 0, 220),
  new THREE.Vector3(-40, 0, 270),
  new THREE.Vector3(-250, 0, 280),
];
tubeCurve.add(new THREE.QuadraticBezierCurve3(...points2));

// 构建动画路径
const tubeCurve2 = new THREE.CurvePath();
tubeCurve2.add(tubeCurve);
const points3 = [
  new THREE.Vector3(-250, 0, 280),
  new THREE.Vector3(-280, 0, 270),
  new THREE.Vector3(-190, 0, 190),
  new THREE.Vector3(-350, 0, 110),
  new THREE.Vector3(-300, 0, 100),
];
tubeCurve2.add(new THREE.CatmullRomCurve3(points3));
// 获取动画路径上的点集
const curvePoints = tubeCurve2.getSpacedPoints(600);
// 显示动画采样点及路径线
const point = new THREE.Points(
  new THREE.BufferGeometry().setFromPoints(curvePoints),
  new THREE.PointsMaterial({ color: "#73adff", size: 0.5 })
);
scene.add(point);
const line = new THREE.Line(
  new THREE.BufferGeometry().setFromPoints(curvePoints),
  new THREE.LineBasicMaterial({ color: "#6efd6b" })
);
scene.add(line);

// 创建管道
const tubeMesh = new THREE.Mesh(
  new THREE.TubeGeometry(tubeCurve, 128, 10, 20),
  new THREE.MeshLambertMaterial({
    color: 0xff0000,
    side: THREE.DoubleSide,
    wireframe: false,
  })
);
scene.add(tubeMesh);
// 使用点集渲染管道
const tubePoints = new THREE.Points(
  tubeMesh.geometry.clone(),
  new THREE.PointsMaterial({ color: 0xff0000, size: 0.5, visible: false })
);
scene.add(tubePoints);

// 控制管道渲染类型
const tubeRenderType = {
  type: "polygons", // 可选值：polygons、lines、points
};
gui
  .add(tubeRenderType, "type", ["polygons", "lines", "points"])
  .onChange((v) => {
    if (v === "polygons") {
      tubePoints.material.visible = false;
      tubeMesh.material.visible = true;
      tubeMesh.material.wireframe = false;
    } else if (v === "lines") {
      tubePoints.material.visible = false;
      tubeMesh.material.visible = true;
      tubeMesh.material.wireframe = true;
    } else if (v === "points") {
      tubePoints.material.visible = true;
      tubeMesh.material.visible = false;
    }
  })
  .name("管道渲染类型");

// 渲染循环
let tubeObj = {
  flag: "关",
};
gui
  .add(tubeObj, "flag", ["开", "关"])
  .onChange((value) => {
    console.log(tubeObj);
    tubeObj.flag = value;
  })
  .name("管道漫游");
let i = 0; //在渲染循环中累加变化
function render2() {
  if (tubeObj.flag === "开") {
    const { x: x1, y: y1, z: z1 } = curvePoints[i];
    const { x: x2, y: y2, z: z2 } = curvePoints[i + 1];
    // 相机位置设置在当前点位置
    camera.position.set(x1, y1 + 2, z1);
    // 曲线上当前点pointsArr[i]和下一个点pointsArr[i+1]近似模拟当前点曲线切线
    // 设置相机观察点为当前点的下一个点，相机视线和当前点曲线切线重合
    updateOrbitControl(new THREE.Vector3(x2, y2 + 2, z2));
    i += 1; //调节速度
    i %= curvePoints.length - 1;
    renderer.render(scene, camera);
  }

  setTimeout(() => {
    requestAnimationFrame(render2);
  }, 15);
}
render2();
//#endregion

//#region OrbitControls旋转缩放限制
// 限制某些交互
// orbitControl.enablePan = false; //禁止平移
// orbitControl.enableZoom = false;  //禁止缩放
// orbitControl.enableRotate = false;  //禁止旋转

// 相机控件OrbitControls.target属性对应的就是相机的.lookAt()观察目标
// 执行controls.update(),相机控件内部会执行camera.lookAt(controls.target)

// 透视投影相机缩放范围
// 对于透视投影相机而言，OrbitControls缩放，本质上就是改变相机的位置属性.position
// 控制缩放范围，就是约束相机位置.position的变化范围，.minDistance和.maxDistance可以实现
orbitControl.minDistance = 1;
orbitControl.maxDistance = 500;
orbitControl.addEventListener("change", () => {
  console.log(
    "camera.position",
    camera.position,
    "camera.lookAt",
    orbitControl.target
  );
  //相机位置与目标观察点距离
  const dis = orbitControl.getDistance();
  console.log("dis", dis);
});

// 正投影缩放范围
// 对于正投影相机，可以通过相机控件OrbitControls的.minZoom和.maxZoom属性实现

// 限制旋转范围
// .maxAzimuthAngle和.minAzimuthAngle属性可以限制相机的水平旋转角度范围
// 其有效值范围为[-2 * Math.PI，2 * Math.PI]，且旋转角度的上限和下限差值小于2 * Math.PI
// orbitControl.minAzimuthAngle = -Math.PI / 2;
// orbitControl.maxAzimuthAngle = Math.PI / 2;
// .maxPolarAngle和.minPolarAngle属性可以限制相机的垂直旋转角度范围, 范围是0到Math.PI
orbitControl.maxPolarAngle = (Math.PI / 3) * 2;
// orbitControl.minPolarAngle = Math.PI / 3;

//OrbitControls控件, 平移时同时改变相机位置和相机朝向, 但这两点间距离保持不变
// 旋转时仅改变相机位置, 相机朝向及两点距离不变
// 缩放时透视相机下改变相机位置和两点距离, 但相机朝向不变; 正交相机下三者均不变

//#endregion
